/* Oracle DDL Generated by BIM 1.0 */
/* 
ETAPA CRIAÇÃO TABELAS NO POSTGRESQL

CREATE TABLE "D_PRODUCT"
(
	"ID_PRODUCT" integer NOT NULL,
	"PRODUCT_NAME" varchar(40),
	"QUANTITY_PER_UNIT" CHAR(16),
	"PRODUCT_UNIT_PRICE" CHAR(16),
	"DISCONTINUED" CHAR(16),
	"ID_CATEGORY" integer,
	"PRODUCT" CHAR(16) NOT NULL,
	"CATEGORY" CHAR(16) NOT NULL,
	"DESCRIPTION" CHAR(16)
)
;


ALTER TABLE "D_PRODUCT" ADD CONSTRAINT "PK_D_PRODUCT"  PRIMARY KEY ("ID_PRODUCT")
;

CREATE TABLE "D_CATEGORY"
(
	"ID_CATEGORY" integer NOT NULL,
	"CATEGORY_NAME" varchar(15),
	"DESCRIPTION" CHAR(16)
)
;


ALTER TABLE "D_CATEGORY" ADD CONSTRAINT "PK_D_CATEGORY"  PRIMARY KEY ("ID_CATEGORY")
;

CREATE TABLE "D_ORDER"
(
	"ID_ORDER" integer NOT NULL,
	"ORDER_LINE_NUMBER" integer,
	"ORDER_NUMBER" CHAR(16)
)
;


ALTER TABLE "D_ORDER" ADD CONSTRAINT "PK_D_ORDER"  PRIMARY KEY ("ID_ORDER")
;

CREATE TABLE "D_SHIPPER"
(
	"ID_SHIPPER" integer NOT NULL,
	"COMPANY_NAME" CHAR(16)
)
;


ALTER TABLE "D_SHIPPER" ADD CONSTRAINT "PK_D_SHIPPER"  PRIMARY KEY ("ID_SHIPPER")
;

CREATE TABLE "D_CUSTOMER"
(
	"ID_CUSTOMER" integer NOT NULL,
	"CUSTOMER_NAME" varchar(40),
	"CUSTOMER_ADDRESS" CHAR(16),
	"CUSTOMER_ZIP_CODE" CHAR(16),
	"ID_LOCATION" integer,
	"CUSTOMER" CHAR(16) NOT NULL
)
;


ALTER TABLE "D_CUSTOMER" ADD CONSTRAINT "PK_D_CUSTOMER"  PRIMARY KEY ("ID_CUSTOMER")
;

CREATE TABLE "D_LOCATION"
(
	"ID_LOCATION" serial NOT NULL,
	"CITY" CHAR(16) NOT NULL,
	"STATE" CHAR(16) NOT NULL,
	"ENGLISH_STATE_NAME" CHAR(16),
	"STATE_TYPE" CHAR(16),
	"REGION" CHAR(16) NOT NULL,
	"REGION_CODE" CHAR(16),
	"COUNTRY" CHAR(16) NOT NULL,
	"COUNTRY_CODE" CHAR(16),
	"POPULATION" CHAR(16),
	"SUBDIVISION" CHAR(16),
	"CONTINENT" CHAR(16) NOT NULL
)
;


ALTER TABLE "D_LOCATION" ADD CONSTRAINT "PK_D_LOCATION"  PRIMARY KEY ("ID_LOCATION")
;

CREATE TABLE "D_SUPPLIER"
(
	"ID_SUPPLIER" integer NOT NULL,
	"SUPPLIER_NAME" CHAR(16),
	"SUPPLIER_ADDRESS" CHAR(16),
	"SUPPLIER_ZIP_CODE" CHAR(16),
	"ID_LOCATION" integer,
	"SUPPLIER_KEY" CHAR(16) NOT NULL
)
;


ALTER TABLE "D_SUPPLIER" ADD CONSTRAINT "PK_D_SUPPLIER"  PRIMARY KEY ("ID_SUPPLIER")
;

CREATE TABLE "D_EMPLOYEE"
(
	"ID_EMPLOYEE" integer NOT NULL,
	"EMPLOYEE_NAME" CHAR(16),
	"TITLE" CHAR(16),
	"BIRTHDATE" CHAR(16),
	"HIREDATE" CHAR(16),
	"EMPLOYEE_KEY" CHAR(16) NOT NULL
)
;


ALTER TABLE "D_EMPLOYEE" ADD CONSTRAINT "PK_D_EMPLOYEE"  PRIMARY KEY ("ID_EMPLOYEE")
;

CREATE TABLE "D_DATE"
(
	"ID_DATE" serial NOT NULL,
	"WEEK_DAY_NUMBER" CHAR(16),
	"MONTH_DAY_NUMBER" CHAR(16),
	"WEEK_DAY_NAME" CHAR(16),
	"YEAR_WEEK_NUMBER" CHAR(16),
	"MONTH_NUMBER" CHAR(16) NOT NULL,
	"MONTH_NAME" CHAR(16),
	"QUARTER" CHAR(16) NOT NULL,
	"YEAR" CHAR(16) NOT NULL,
	"DATE" CHAR(16) NOT NULL
)
;


ALTER TABLE "D_DATE" ADD CONSTRAINT "PK_D_DATE"  PRIMARY KEY ("ID_DATE")
;

CREATE TABLE "F_SALES"
(
	"ID_PRODUCT" integer NOT NULL,
	"ID_SHIPPER" integer NOT NULL,
	"ID_CUSTOMER" integer NOT NULL,
	"ID_SUPPLIER" integer NOT NULL,
	"ID_EMPLOYEE" integer NOT NULL,
	"ID_DATE_DUEDATE" integer NOT NULL,
	"ID_DATE_ORDER_DATE" integer NOT NULL,
	"ID_DATE_ORDERDATE" integer NOT NULL,
	"ID_DATE_SHIPDATE" integer NOT NULL,
	"QUANTITY" NUMERIC,
	"UNITPRICE" NUMERIC,
	"DISCOUNT" NUMERIC,
	"FREIGHT" NUMERIC,
	"ORDER_NUMBER" integer NOT NULL
)
;


ALTER TABLE "F_SALES" ADD CONSTRAINT "PK_F_SALES"  PRIMARY KEY ("ID_PRODUCT", "ID_SHIPPER", "ID_CUSTOMER", "ID_SUPPLIER", "ID_EMPLOYEE", "ID_DATE_DUEDATE", "ID_DATE_ORDER_DATE", "ID_DATE_ORDERDATE", "ID_DATE_SHIPDATE", "ORDER_NUMBER")
;

ALTER TABLE "D_PRODUCT" ADD CONSTRAINT "ProductCategory" FOREIGN KEY ("ID_CATEGORY")
REFERENCES "D_CATEGORY" ("ID_CATEGORY")
;

ALTER TABLE "D_CUSTOMER" ADD CONSTRAINT "FK_CUSTOMER_LOCATION" FOREIGN KEY ("ID_LOCATION")
REFERENCES "D_LOCATION" ("ID_LOCATION")
;

ALTER TABLE "D_SUPPLIER" ADD CONSTRAINT "FK_SUPPLIER_LOCATION" FOREIGN KEY ("ID_LOCATION")
REFERENCES "D_LOCATION" ("ID_LOCATION")
;

ALTER TABLE "F_SALES" ADD CONSTRAINT "FK_SALES_PRODUCT" FOREIGN KEY ("ID_PRODUCT")
REFERENCES "D_PRODUCT" ("ID_PRODUCT")
;

ALTER TABLE "F_SALES" ADD CONSTRAINT "FK_SALES_SHIPPER" FOREIGN KEY ("ID_SHIPPER")
REFERENCES "D_SHIPPER" ("ID_SHIPPER")
;

ALTER TABLE "F_SALES" ADD CONSTRAINT "FK_SALES_CUSTOMER" FOREIGN KEY ("ID_CUSTOMER")
REFERENCES "D_CUSTOMER" ("ID_CUSTOMER")
;

ALTER TABLE "F_SALES" ADD CONSTRAINT "FK_SALES_SUPPLIER" FOREIGN KEY ("ID_SUPPLIER")
REFERENCES "D_SUPPLIER" ("ID_SUPPLIER")
;

ALTER TABLE "F_SALES" ADD CONSTRAINT "FK_SALES_EMPLOYEE" FOREIGN KEY ("ID_EMPLOYEE")
REFERENCES "D_EMPLOYEE" ("ID_EMPLOYEE")
;

ALTER TABLE "F_SALES" ADD CONSTRAINT "FK_SALES_DATE_DUEDATE" FOREIGN KEY ("ID_DATE_DUEDATE")
REFERENCES "D_DATE" ("ID_DATE")
;

ALTER TABLE "F_SALES" ADD CONSTRAINT "FK_SALES_DATE_ORDER_DATE" FOREIGN KEY ("ID_DATE_ORDER_DATE")
REFERENCES "D_DATE" ("ID_DATE")
;

ALTER TABLE "F_SALES" ADD CONSTRAINT "FK_SALES_DATE_ORDERDATE" FOREIGN KEY ("ID_DATE_ORDERDATE")
REFERENCES "D_DATE" ("ID_DATE")
;

ALTER TABLE "F_SALES" ADD CONSTRAINT "FK_SALES_DATE_SHIPDATE" FOREIGN KEY ("ID_DATE_SHIPDATE")
REFERENCES "D_DATE" ("ID_DATE")
;
*/

-- ETAPA CRIAÇÃO DATA FLOW TASK - LOAD DATA INDO THE DIMENSIONS D_PRODUCT AND D_CATEGORY - FIRST HAS TO CREATE DATA FLOW D_CATEGORY --


